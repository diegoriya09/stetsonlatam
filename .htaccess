# Activa el motor de reescritura de URLs
RewriteEngine On

# Redirige a HTTPS si no se está usando
RewriteCond %{HTTPS} off
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# --- REGLA 1: Quitar la extensión .php de los archivos ---

# Redirige peticiones a "archivo.php" hacia "archivo" (para los usuarios)
RewriteCond %{THE_REQUEST} \s/+(.+?)\.php[\s?] [NC]
RewriteRule ^ %1 [R=301,L]

# Maneja internamente las peticiones a "archivo" como si fueran a "archivo.php" (para el servidor)
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{DOCUMENT_ROOT}/%{REQUEST_URI}.php -f
RewriteRule ^(.*?)/?$ $1.php [L]

# --- REGLA 2: URLs amigables para categorías y productos ---

# Regla para /categoria/ID (ej: /categoria/8)
RewriteRule ^categoria([0-9]+)$ categoria.php?id=$1 [NC,L]

# Regla para /producto/ID (ej: /producto/15)
RewriteRule ^producto([0-9]+)$ producto.php?id=$1 [NC,L]